{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Official SUAS-Aligned MongoDB Schema",
  "description": "JSON schema for the Conecta Social collections, aligned with official SUAS codes.",
  "definitions": {
    "observation": {
      "type": "object",
      "properties": {
        "observation": { "type": "string" },
        "whoIsObservingId": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["observation", "whoIsObservingId"]
    },
    "rg": {
      "type": "object",
      "properties": {
        "issueDate": { "type": "string" },
        "issuingBody": { "type": "string" },
        "number": { "type": "string" },
        "uf": { "type": "string" }
      },
      "required": ["issueDate", "issuingBody", "number", "uf"]
    }
  },
  "properties": {
    "referencePerson": {
      "type": "object",
      "title": "Reference Person",
      "properties": {
        "fullName": { "type": "string" },
        "socialName": { "type": "string" },
        "motherName": { "type": "string" },
        "nis": { "type": "string" },
        "cpf": { "type": "string" },
        "diagnosis": { "type": "string" },
        "rg": { "$ref": "#/definitions/rg" },
        "isShelter": { "type": "boolean" },
        "localLocalization": { 
          "type": "number", 
          "description": "Official SUAS code for residence zone. 1: URBAN, 2: RURAL.",
          "enum": [1, 2]
        },
        "cep": { "type": "string" },
        "adress": { "type": "string" },
        "neighborhood": { "type": "string" },
        "adressComplement": { "type": "string" },
        "adressNumber": { "type": "string" },
        "city": { "type": "string" },
        "phone": { "type": "string" },
        "state": { "type": "string" },
        "whoIsOpeningId": { "type": "string" },
        "fistEntryInUnityId": { "type": "string" },
        "familyCompositionId": { "type": "string" },
        "homeConditionsId": { "type": "string" },
        "workConditionId": { "type": "string" },
        "familySituationViolationId": { "type": "string" },
        "helphyConditionId": { "type": "string" },
        "eventlyBenefitId": { "type": "string" },
        "familyAndCommunityId": { "type": "string" },
        "familyHistoryOfComplianceSocialEducationalMensuresId": { "type": "string" },
        "familyHistoryInstitutionalCompletId": { "type": "string" },
        "observations": { "type": "array", "items": { "$ref": "#/definitions/observation" } },
        "birthDate": { "type": "string", "format": "date-time" },
        "biologicalGender": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "updatedAt": { "type": "string", "format": "date-time" }
      }
    },
    "familyComposition": {
        "type": "object",
        "title": "Family Composition",
        "properties": {
            "socialEspecification": { "type": "string" },
            "espeficationEthnicity": { "type": "string" },
            "familyCompositionPerson": {
                "type": "array",
                "items": {
                    "type": "object",
                    "properties": {
                        "fullName": { "type": "string" },
                        "birthDate": { "type": "string", "format": "date-time" },
                        "biologicalGender": { "type": "string" },
                        "personWithDisability": { "type": "boolean" },
                        "kinship": { 
                          "type": "number",
                          "description": "Official SUAS code for kinship.",
                          "enum": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
                        },
                        "educationConditionPerson": {
                          "type": "object",
                          "properties": {
                            "schoolShip": {
                              "type": "number",
                              "description": "Official SUAS code for education level.",
                              "enum": [0, 1, 2, 11, 12, 13, 14, 15, 16, 17, 18, 19, 21, 22, 23, 30, 31, 40, 41, 99]
                            }
                          }
                        },
                        "workConditionPerson": {
                          "type": "object",
                          "properties": {
                            "workCondition": {
                              "type": "number",
                              "description": "Official SUAS code for work condition.",
                              "enum": [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
                            }
                          }
                        }
                    }
                }
            }
        }
    },
    "familyEventlyBenefits": {
        "type": "object",
        "title": "Family Evently Benefits",
        "properties": {
            "typeOfBenefit": { 
              "type": "number",
              "description": "Official SUAS code for eventual benefits.",
              "enum": [1, 2, 3, 4, 5, 6]
            }
        }
    }
  }
}